<%- include('layout', { body: `
    <h2 style="margin-bottom: 30px;">Панель администратора</h2>

    <button onclick="showNewJobForm()" class="btn btn-primary" style="margin-bottom: 40px;">Новая вакансия</button>

    <div id="newJobForm" style="display: none; margin: 20px 0;">
        <form action="/jobs" method="POST" class="job-card">
            <div class="form-group">
                <label for="title">Название вакансии:</label>
                <input type="text" id="title" name="title" required>
            </div>
            <div class="form-group">
                <label for="description">Описание:</label>
                <input type="text" id="description" name="description" required>
            </div>
            <div class="form-group">
                <label for="salary">Зарплата:</label>
                <input type="text" id="salary" name="salary" required>
            </div>
            <div class="form-group">
                <label for="requirements">Требования:</label>
                <input type="text" id="requirements" name="requirements" required>
            </div>
            <div class="form-group">
                <label for="phone">Телефон:</label>
                <input type="text" id="phone" name="phone" required>
            </div>
            <div class="form-group">
                <label for="email">Email:</label>
                <input type="email" id="email" name="email" required>
            </div>
            <button type="submit" class="btn btn-primary">Сохранить</button>
        </form>
    </div>

    ${jobs.map(job => `
        <div class="job-card">
            <h2 class="job-title">${job.title}</h2>
            <p>${job.description}</p>
            <p class="job-salary">${job.salary}</p>
            <div class="job-requirements">
                <h3>Требования:</h3>
                <p>${job.requirements}</p>
            </div>
            <div class="contact-info">
                <p>Телефон: ${job.phone}</p>
                <p>Email: ${job.email}</p>
            </div>
            <div style="margin-top: 20px;">
                <button onclick="deleteJob(${job.id})" class="btn btn-danger">Удалить</button>
            </div>
        </div>
    `).join('')}

    <script>
    function showNewJobForm() {
        document.getElementById('newJobForm').style.display = 'block';
    }

    function deleteJob(id) {
        if (confirm('Вы уверены, что хотите удалить эту вакансию?')) {
            fetch(\`/jobs/\${id}\`, {
                method: 'DELETE'
            }).then(response => {
                if (response.ok) {
                    window.location.reload();
                }
            });
        }
    }
    </script>
`}) %> 